<!DOCTYPE HTML>
<html lang="UTF-8">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="shortcut icon" type="image/x-icon" href="/resource/icon.png" media="screen"/>
    <title>pieifo.com</title>
    {% include head.html %}
</head>
<body style="background-color: #f2f2f2">
<div style="margin:0 auto;display: none">
    <img src="/resource/share.jpg">
</div>
<div class="nav-container" style="background-color: white">
    <div class="bar bar--sm visible-xs">
        <div class="container">
            <div class="row" style="vertical-align: middle;">
                <div class="col-xs-3 col-sm-2">
                    <a>
                        <img class="logo" alt="logo" src="/resource/logo.jpg"/>
                    </a>
                    <span class="pieifo">比特派运营的专业分叉信息站</span>
                </div>
                <div class="col-xs-9 col-sm-10 text-right">
                    <a href="#" class="hamburger-toggle" data-toggle-class="#menu1;hidden-xs">
                        <a href="#" class="hamburger-toggle" data-toggle-class="#menu1;hidden-xs">
                            <img src="resource/menu.png" style="max-width: 12%">
                        </a>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <nav id="menu1" class="bar bar--sm bar-1 hidden-xs hiddem-sm">
        <div class="container">
            <div class="row">
                <div class="col-md-5 col-sm-4 hidden-xs">
                    <div class="bar__module">
                        <a>
                            <img class="logo logo-dark" alt="logo" src="/resource/logo.jpg"/>
                        </a>
                        <span class="pieifo">比特派运营的专业分叉信息站</span>
                    </div>
                </div>
                <div class="col-md-7 col-sm-8 text-right text-left-xs text-left-sm">
                    <div class="bar__module">
                        <ul class="menu-horizontal text-right">
                            {% for link in site.headerMenu %}
                            <li class="dropdown">
                                <span id="{{link['id']}}" class="dropdown__trigger">{{link['menuTitle']}}</span>
                                <div class="dropdown__container hidden-sm hidden-md hidden-lg">
                                    <div class="container">
                                        <div class="row">
                                            <div class="dropdown__content col-md-2 col-sm-3">
                                                <ul class="menu-vertical">
                                                    {% for item in link['menuList'] %}
                                                    <li>
                                                        <a href="#" id="{{item['id']}}" class="inner-link" style="font-size: 14px">
                                                            {{item['menuName']}}
                                                        </a>
                                                    </li>
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>

<div class="main-container">
    <section class="no-bottom no-top" style="margin-top: 10px;">
        <div class="container">
            <div class="statustabs">
                <div class="tabs-header">
                    <div class="border"></div>
                    <ul class="menu_list">
                        {% for link in site.headerMenu %}
                        {% if link['menuTitle'] == "分叉" %}
                        {% for item in link['menuList'] %}
                        <li class="active"><a id="{{item['id']}}" tab-id="1"
                                              ripple-color="#FFF">{{item['menuName']}}</a></li>
                        {% endfor %}
                        {% endif %}
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section class="no-bottom">
        <div class="container">
            <div class="coin_list">
                <ul class="clearfix">
                    {% for link in site.btForkInfo %}
                    <li class="coin_info">
                        <a href="{{link['imageHref']}}"><img
                                src="{{link['imageUrl']}}"></a>
                        <div class="hot-info">
                            <span class="title">{{link['coinName']}}</span>
                            <p class="description">{{link['coinInfo']}}</p>
                            <div class="details">
                                <div class="col-xs-3">
                                    <span>
                                        {{link['blockHight']}}
                                    </span>
                                    <span style="margin-top: 10px; display: block;">{{link['blockHightTitle']}}</span>
                                </div>

                                <div class="col-xs-3">
                                    <span class="{{link['currentHightClass']}}">
                                        {{link['currentHight']}}
                                    </span>
                                    <span style="margin-top: 10px; display: block;">{{link['currentHightTitle']}}</span>
                                </div>

                                <div class="col-xs-4">
                                    <span class="{{link['timeClass']}}">{{link['time']}}</span>
                                    <span style="margin-top: 10px; display: block;" class="{{link['timeTitleClass']}}">{{link['timeTitle']}}</span>
                                </div>
                            </div>
                            <a href="{{link['btnHref']}}" class="btn">{{link['btnTitle']}}</a>
                        </div>
                        <div class="pro-status ongoing" style="background-color: #{{link['stateColor']}}">
                            {{link['stateTitle']}}
                        </div>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </section>

    <div class="footer">
        <div class="row">
            <a href="http://www.bitpie.com" target="_blank">Pieifo是由比特派运营的专业分叉类信息站 Powered by <b
                    style="color: #3a7ceb;">Bitpie.com</b></a>
        </div>
    </div>
</div>
{% include js.html %}
<script>
    $(document).ready(function () {
        displayBlockHight();
        updateTab();
    });

    function updateTab() {
        var activePos = $('.tabs-header .active').position();

        function changePos() {
            activePos = $('.tabs-header .active').position();
            $('.border').stop().css({
                left: activePos.left,
                width: $('.tabs-header .active').width()
            });
        }

        changePos();
        var tabHeight = $('.tab.active').height();

        function animateTabHeight() {
            tabHeight = $('.tab.active').height();
            $('.tabs-content').stop().css({height: tabHeight + 'px'});
        }

        animateTabHeight();

        function changeTab() {
            var getTabId = $('.tabs-header .active a').attr('tab-id');
            $('.tab').stop().fadeOut(300, function () {
                $(this).removeClass('active');
            }).hide();
            $('.tab[tab-id=' + getTabId + ']').stop().fadeIn(300, function () {
                $(this).addClass('active');
                animateTabHeight();
            });
        }

        $('.tabs-header a').on('click', function (e) {
            e.preventDefault();
            $('.tabs-header a').stop().parent().removeClass('active');
            $(this).stop().parent().addClass('active');
            changePos();
            $('.tab').stop().fadeOut(300, function () {
                $(this).removeClass('active');
            }).hide();
        });
    }

    $("body").on('click','#ifoservice',function(){
        window.location.href="pages/ifoservice.html";
    });

    $("body").on('click','#typefork',function(){
        fork();
    });

    $("body").on('click','#typebtairdrop',function(){
        btairdrop();
    });

    $("body").on('click','#forkall',function(){
        updateForkAll();
    });

    $("body").on('click','#forking',function(){
        updateForking();
    });

    $("body").on('click','#forkend',function(){
        updateForkend();
    });

    $("body").on('click','#forkstart',function(){
        updateForkStart();
    });

    $("body").on('click','#btall',function(){
        updateBtAll();
    });

    $("body").on('click','#btprocessing',function(){
        updateEtProcessing();
    });

    $("body").on('click','#btend',function(){
        updateEtEnd();
    });

    function fork() {
        $(".menu_list").empty();
        $(".menu_list").append("{% for link in site.headerMenu %}\n" +
            "    {% if link['menuTitle'] == '分叉' %}\n" +
            "    {% for item in link['menuList'] %}\n" +
            "    <li class=\"active\"><a id=\"{{item['id']}}\" tab-id=\"1\"\n" +
            "                          ripple-color=\"#FFF\">{{item['menuName']}}</a></li>\n" +
            "    {% endfor %}\n" +
            "    {% endif %}\n" +
            "    {% endfor %}");
        updateForkAll();
        updateTab();
    }

    function btairdrop() {
        $(".menu_list").empty();
        $(".menu_list").append("{% for link in site.headerMenu %}\n" +
            "    {% if link['menuTitle'] == '糖果' %}\n" +
            "    {% for item in link['menuList'] %}\n" +
            "    <li class=\"active\"><a id=\"{{item['id']}}\" tab-id=\"1\"\n" +
            "                          ripple-color=\"#FFF\">{{item['menuName']}}</a></li>\n" +
            "    {% endfor %}\n" +
            "    {% endif %}\n" +
            "    {% endfor %}");
        updateBtAll();
        updateTab();
    }

    function updateForkAll() {
        $(".clearfix").empty();
        $(".clearfix").append("{% for link in site.btForkInfo %}\n" +
            "                    <li class=\"coin_info\">\n" +
            "                        <a href=\"{{link['imageHref']}}\"><img\n" +
            "                                src=\"{{link['imageUrl']}}\"></a>\n" +
            "                        <div class=\"hot-info\">\n" +
            "                            <span class=\"title\">{{link['coinName']}}</span>\n" +
            "                            <p class=\"description\">{{link['coinInfo']}}</p>\n" +
            "                            <div class=\"details\">\n" +
            "                                <div class=\"col-xs-3\">\n" +
            "                                    <span>\n" +
            "                                        {{link['blockHight']}}\n" +
            "                                    </span>\n" +
            "                                    <span style=\"margin-top: 10px; display: block;\">{{link['blockHightTitle']}}</span>\n" +
            "                                </div>\n" +
            "\n" +
            "                                <div class=\"col-xs-3\">\n" +
            "                                    <span class=\"{{link['currentHightClass']}}\">\n" +
            "                                        {{link['currentHight']}}\n" +
            "                                    </span>\n" +
            "                                    <span style=\"margin-top: 10px; display: block;\">{{link['currentHightTitle']}}</span>\n" +
            "                                </div>\n" +
            "\n" +
            "                                <div class=\"col-xs-4\">\n" +
            "                                    <span class=\"{{link['timeClass']}}\">{{link['time']}}</span>\n" +
            "                                    <span style=\"margin-top: 10px; display: block;\" class=\"{{link['timeTitleClass']}}\">{{link['timeTitle']}}</span>\n" +
            "                                </div>\n" +
            "                            </div>\n" +
            "                            <a href=\"{{link['btnHref']}}\" class=\"btn\">{{link['btnTitle']}}</a>\n" +
            "                        </div>\n" +
            "                        <div class=\"pro-status ongoing\" style=\"background-color: #{{link['stateColor']}}\">\n" +
            "                            {{link['stateTitle']}}\n" +
            "                        </div>\n" +
            "                    </li>\n" +
            "                    {% endfor %}")
        displayBlockHight();
    }

    function updateForking() {
        $(".clearfix").empty();
        $(".clearfix").append("{% for link in site.btForkInfo %}\n" +
            "{% if link['state'] == 0 %}\n" +
            "<li class=\"coin_info\">\n" +
            "    <a href=\"{{link['imageHref']}}\"><img\n" +
            "            src=\"{{link['imageUrl']}}\"></a>\n" +
            "    <div class=\"hot-info\">\n" +
            "        <span class=\"title\">{{link['coinName']}}</span>\n" +
            "        <p class=\"description\">{{link['coinInfo']}}</p>\n" +
            "        <div class=\"details\">\n" +
            "            <div class=\"col-xs-3\">\n" +
            "                <span>\n" +
            "                    {{link['blockHight']}}\n" +
            "                </span>\n" +
            "                <span style=\"margin-top: 10px; display: block;\">{{link['blockHightTitle']}}</span>\n" +
            "            </div>\n" +
            "\n" +
            "            <div class=\"col-xs-3\">\n" +
            "                <span class=\"{{link['currentHightClass']}}\">\n" +
            "                    {{link['currentHight']}}\n" +
            "                </span>\n" +
            "                <span style=\"margin-top: 10px; display: block;\">{{link['currentHightTitle']}}</span>\n" +
            "            </div>\n" +
            "\n" +
            "            <div class=\"col-xs-4\">\n" +
            "                <span class=\"{{link['timeClass']}}\">{{link['time']}}</span>\n" +
            "                <span style=\"margin-top: 10px; display: block;\" class=\"{{link['timeTitleClass']}}\">{{link['timeTitle']}}</span>\n" +
            "            </div>\n" +
            "        </div>\n" +
            "        <a href=\"{{link['btnHref']}}\" class=\"btn\">{{link['btnTitle']}}</a>\n" +
            "    </div>\n" +
            "    <div class=\"pro-status ongoing\" style=\"background-color: #{{link['stateColor']}}\">\n" +
            "        {{link['stateTitle']}}\n" +
            "    </div>\n" +
            "</li>\n" +
            "{% endif %}\n" +
            "{% endfor %}\n");
        displayBlockHight();
    }

    function updateForkend() {
        $(".clearfix").empty();
        $(".clearfix").append("{% for link in site.btForkInfo %}\n" +
            "{% if link['state'] == 1 %}\n" +
            "<li class=\"coin_info\">\n" +
            "    <a href=\"{{link['imageHref']}}\"><img\n" +
            "            src=\"{{link['imageUrl']}}\"></a>\n" +
            "    <div class=\"hot-info\">\n" +
            "        <span class=\"title\">{{link['coinName']}}</span>\n" +
            "        <p class=\"description\">{{link['coinInfo']}}</p>\n" +
            "        <div class=\"details\">\n" +
            "            <div class=\"col-xs-3\">\n" +
            "                <span>\n" +
            "                    {{link['blockHight']}}\n" +
            "                </span>\n" +
            "                <span style=\"margin-top: 10px; display: block;\">{{link['blockHightTitle']}}</span>\n" +
            "            </div>\n" +
            "\n" +
            "            <div class=\"col-xs-3\">\n" +
            "                <span class=\"{{link['currentHightClass']}}\">\n" +
            "                    {{link['currentHight']}}\n" +
            "                </span>\n" +
            "                <span style=\"margin-top: 10px; display: block;\">{{link['currentHightTitle']}}</span>\n" +
            "            </div>\n" +
            "\n" +
            "            <div class=\"col-xs-4\">\n" +
            "                <span class=\"{{link['timeClass']}}\">{{link['time']}}</span>\n" +
            "                <span style=\"margin-top: 10px; display: block;\" class=\"{{link['timeTitleClass']}}\">{{link['timeTitle']}}</span>\n" +
            "            </div>\n" +
            "        </div>\n" +
            "        <a href=\"{{link['btnHref']}}\" class=\"btn\">{{link['btnTitle']}}</a>\n" +
            "    </div>\n" +
            "    <div class=\"pro-status ongoing\" style=\"background-color: #{{link['stateColor']}}\">\n" +
            "        {{link['stateTitle']}}\n" +
            "    </div>\n" +
            "</li>\n" +
            "{% endif %}\n" +
            "{% endfor %}\n");
        displayBlockHight();
    }

    function updateForkStart() {
        $(".clearfix").empty();
        $(".clearfix").append("{% for link in site.btForkInfo %}\n" +
            "{% if link['state'] == 2 %}\n" +
            "<li class=\"coin_info\">\n" +
            "    <a href=\"{{link['imageHref']}}\"><img\n" +
            "            src=\"{{link['imageUrl']}}\"></a>\n" +
            "    <div class=\"hot-info\">\n" +
            "        <span class=\"title\">{{link['coinName']}}</span>\n" +
            "        <p class=\"description\">{{link['coinInfo']}}</p>\n" +
            "        <div class=\"details\">\n" +
            "            <div class=\"col-xs-3\">\n" +
            "                <span>\n" +
            "                    {{link['blockHight']}}\n" +
            "                </span>\n" +
            "                <span style=\"margin-top: 10px; display: block;\">{{link['blockHightTitle']}}</span>\n" +
            "            </div>\n" +
            "\n" +
            "            <div class=\"col-xs-3\">\n" +
            "                <span class=\"{{link['currentHightClass']}}\">\n" +
            "                    {{link['currentHight']}}\n" +
            "                </span>\n" +
            "                <span style=\"margin-top: 10px; display: block;\">{{link['currentHightTitle']}}</span>\n" +
            "            </div>\n" +
            "\n" +
            "            <div class=\"col-xs-4\">\n" +
            "                <span class=\"{{link['timeClass']}}\">{{link['time']}}</span>\n" +
            "                <span style=\"margin-top: 10px; display: block;\" class=\"{{link['timeTitleClass']}}\">{{link['timeTitle']}}</span>\n" +
            "            </div>\n" +
            "        </div>\n" +
            "        <a href=\"{{link['btnHref']}}\" class=\"btn\">{{link['btnTitle']}}</a>\n" +
            "    </div>\n" +
            "    <div class=\"pro-status ongoing\" style=\"background-color: #{{link['stateColor']}}\">\n" +
            "        {{link['stateTitle']}}\n" +
            "    </div>\n" +
            "</li>\n" +
            "{% endif %}\n" +
            "{% endfor %}\n");
        displayBlockHight();
    }

    function updateBtAll() {
        $(".clearfix").empty();
        $(".clearfix").append("{% for link in site.btAirdropInfo %}\n" +
            "                    <li class=\"coin_info\">\n" +
            "                        <a href=\"{{link['imageHref']}}\"><img\n" +
            "                                src=\"{{link['imageUrl']}}\"></a>\n" +
            "                        <div class=\"hot-info\">\n" +
            "                            <span class=\"title\">{{link['coinName']}}</span>\n" +
            "                            <p class=\"description\">{{link['coinInfo']}}</p>\n" +
            "                            <div class=\"details\">\n" +
            "                            <a href=\"{{link['btnHref']}}\" class=\"btn\">{{link['btnTitle']}}</a>\n" +
            "                        </div>\n" +
            "                        <div class=\"pro-status ongoing\" style=\"background-color: #{{link['stateColor']}}\">\n" +
            "                            {{link['stateTitle']}}\n" +
            "                        </div>\n" +
            "                    </li>\n" +
            "                    {% endfor %}")
    }

    function updateEtProcessing() {
        $(".clearfix").empty();
        $(".clearfix").append("{% for link in site.btAirdropInfo %}\n" +
            "{% if link['state'] == 1 %}\n" +
            "<li class=\"coin_info\">\n" +
            "    <a href=\"{{link['imageHref']}}\"><img\n" +
            "            src=\"{{link['imageUrl']}}\"></a>\n" +
            "    <div class=\"hot-info\">\n" +
            "        <span class=\"title\">{{link['coinName']}}</span>\n" +
            "        <p class=\"description\">{{link['coinInfo']}}</p>\n" +
            "        <a href=\"{{link['btnHref']}}\" class=\"btn\">{{link['btnTitle']}}</a>\n" +
            "    </div>\n" +
            "    <div class=\"pro-status ongoing\" style=\"background-color: #{{link['stateColor']}}\">\n" +
            "        {{link['stateTitle']}}\n" +
            "    </div>\n" +
            "</li>\n" +
            "{% endif %}\n" +
            "{% endfor %}\n")
    }

    function updateEtEnd() {
        $(".clearfix").empty();
        $(".clearfix").append("{% for link in site.btAirdropInfo %}\n" +
            "{% if link['state'] == 0 %}\n" +
            "<li class=\"coin_info\">\n" +
            "    <a href=\"{{link['imageHref']}}\"><img\n" +
            "            src=\"{{link['imageUrl']}}\"></a>\n" +
            "    <div class=\"hot-info\">\n" +
            "        <span class=\"title\">{{link['coinName']}}</span>\n" +
            "        <p class=\"description\">{{link['coinInfo']}}</p>\n" +
            "        <a href=\"{{link['btnHref']}}\" class=\"btn\">{{link['btnTitle']}}</a>\n" +
            "    </div>\n" +
            "    <div class=\"pro-status ongoing\" style=\"background-color: #{{link['stateColor']}}\">\n" +
            "        {{link['stateTitle']}}\n" +
            "    </div>\n" +
            "</li>\n" +
            "{% endif %}\n" +
            "{% endfor %}\n");
    }

    function modifyTimeValue(hight) {
        var blockHight = "{%for link in site.btForkInfo%} {{link['blockHight']}}{% endfor %}";
        var timeClass = "{%for link in site.btForkInfo%} {{link['timeClass']}}{% endfor %}";
        var timeTitle = "{%for link in site.btForkInfo%} {{link['timeTitleClass']}}{% endfor %}";
        var blockHightArr = blockHight.split(" ");
        var timeClassArr = timeClass.split(" ");
        var timeTitleArr = timeTitle.split(" ");
        for (var i = 0; i < timeClassArr.length; i++) {
            if (i != 0) {
                if ($("." + timeClassArr[i]).text() != "0" && blockHightArr[i] != "未公布" && $("." + timeClassArr[i]).text() != "未确定") {
                    var timeDiscrepancy = (blockHightArr[i] - hight) * 10 * 60 * 1000;
                    if (timeDiscrepancy > 0) {
                        var days = Math.floor(timeDiscrepancy / (24 * 3600 * 1000))
                        var leave1 = timeDiscrepancy % (24 * 3600 * 1000)
                        var hours;
                        if (days != 0) {
                            hours = Math.floor(leave1 / (3600 * 1000));
                        } else {
                            hours = (leave1 / (3600 * 1000)).toFixed(1);
                        }
                        $("." + timeTitleArr[i]).text("倒计时(预估)");
                        $("." + timeClassArr[i]).text(days + "天" + hours + "时");
                    } else {
                        $("." + timeTitleArr[i]).text("倒计时");
                    }
                }
            }
        }
    }

    function displayBlockHight() {
        $.get("https://bitpie.getcai.com/api/v1/bitcoind/status?currentstring=" + new Date().getTime(), {}, function (data) {
            var blockhight = data.headers;
            var hightStr = "{%for link in site.btForkInfo%} {{link['currentHightClass']}}{% endfor %}";
            var hightArr = hightStr.split(" ");
            for (var i = 0; i < hightArr.length; i++) {
                if (i != 0) {
                    $("." + hightArr[i]).text(blockhight);
                    modifyTimeValue(blockhight);
                }
            }
        })
    }


</script>

</body>
</html>
